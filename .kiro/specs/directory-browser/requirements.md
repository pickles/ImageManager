# 要件定義書

## 概要

ImageManagerアプリケーションに左ペインのディレクトリブラウザ機能を追加します。ユーザーがディレクトリを選択し、そのディレクトリ内の画像ファイル一覧を表示し、ファイルを選択して画像を表示できる機能です。左ペインは折りたたみ可能で、ユーザーの作業スペースを最適化できます。

## 要件

### 要件1

**ユーザーストーリー:** ユーザーとして、ディレクトリを選択できるボタンがある左ペインを表示したい。これにより、画像ファイルが保存されているフォルダを簡単に選択できるようになる。

#### 受け入れ基準

1. WHEN アプリケーションが起動される THEN システムは左ペインを表示する SHALL
2. WHEN 左ペインが表示される THEN システムは「ディレクトリを選択」ボタンを表示する SHALL
3. WHEN ユーザーが「ディレクトリを選択」ボタンをクリックする THEN システムはディレクトリ選択ダイアログを開く SHALL
4. WHEN ディレクトリ選択ダイアログが開かれる THEN システムはローカルファイルシステムのフォルダ選択を可能にする SHALL

### 要件2

**ユーザーストーリー:** ユーザーとして、選択したディレクトリ内の画像ファイル一覧を左ペインで確認したい。これにより、どの画像ファイルが利用可能かを一目で把握できるようになる。

#### 受け入れ基準

1. WHEN ユーザーがディレクトリを選択する THEN システムは選択されたディレクトリ内の画像ファイルをスキャンする SHALL
2. WHEN 画像ファイルのスキャンが完了する THEN システムは画像ファイル一覧を左ペインに表示する SHALL
3. WHEN 画像ファイル一覧が表示される THEN システムはJPEG、PNG、GIF、WebP形式のファイルのみを表示する SHALL
4. WHEN 画像ファイル一覧が表示される THEN システムは各ファイルのファイル名と作成日を表示する SHALL
5. WHEN 画像ファイル一覧が表示される THEN システムはデフォルトでファイル作成日の降順でソートして表示する SHALL
6. WHEN 画像ファイルが多数存在する THEN システムはスクロール可能な一覧として表示する SHALL
7. WHEN ディレクトリに画像ファイルが存在しない THEN システムは「画像ファイルが見つかりません」メッセージを表示する SHALL

### 要件6

**ユーザーストーリー:** ユーザーとして、画像ファイル一覧をファイル名や作成日でソートしたい。これにより、目的のファイルを効率的に見つけることができるようになる。

#### 受け入れ基準

1. WHEN 画像ファイル一覧が表示される THEN システムはソートオプション（ファイル名、作成日）を表示する SHALL
2. WHEN ユーザーがファイル名ソートを選択する THEN システムはファイル名の昇順でファイル一覧をソートする SHALL
3. WHEN ユーザーが同じソートオプションを再度選択する THEN システムはソート順序を降順に変更する SHALL
4. WHEN ユーザーが作成日ソートを選択する THEN システムは作成日の昇順でファイル一覧をソートする SHALL
5. WHEN アプリケーションが起動される THEN システムはデフォルトで作成日の降順ソートを適用する SHALL
6. WHEN ソート順序が変更される THEN システムは現在のソート状態を視覚的に表示する SHALL

### 要件3

**ユーザーストーリー:** ユーザーとして、左ペインの画像ファイル一覧から特定のファイルを選択して、メイン表示エリアに画像を表示したい。これにより、複数の画像を効率的に閲覧できるようになる。

#### 受け入れ基準

1. WHEN ユーザーが画像ファイル一覧のファイルをクリックする THEN システムは選択されたファイルをハイライト表示する SHALL
2. WHEN ファイルが選択される THEN システムは選択された画像をメイン表示エリアに読み込む SHALL
3. WHEN 画像の読み込みが開始される THEN システムはローディング状態を表示する SHALL
4. WHEN 画像の読み込みが完了する THEN システムは画像をメイン表示エリアに表示する SHALL
5. WHEN 画像の読み込みでエラーが発生する THEN システムは適切なエラーメッセージを表示する SHALL
6. WHEN 新しい画像が選択される THEN システムは前の画像のメモリリソースを適切に解放する SHALL

### 要件4

**ユーザーストーリー:** ユーザーとして、左ペインを折りたたんで作業スペースを広げたい。これにより、画像表示エリアを最大化して画像をより詳細に確認できるようになる。

#### 受け入れ基準

1. WHEN 左ペインが表示されている THEN システムは折りたたみボタンを表示する SHALL
2. WHEN ユーザーが折りたたみボタンをクリックする THEN システムは左ペインを非表示にする SHALL
3. WHEN 左ペインが折りたたまれる THEN システムはメイン表示エリアの幅を拡張する SHALL
4. WHEN 左ペインが折りたたまれている THEN システムは展開ボタンを表示する SHALL
5. WHEN ユーザーが展開ボタンをクリックする THEN システムは左ペインを再表示する SHALL
6. WHEN 左ペインが展開される THEN システムは以前の状態（選択されたディレクトリとファイル一覧）を復元する SHALL

### 要件5

**ユーザーストーリー:** ユーザーとして、レスポンシブなUIで様々な画面サイズでも快適に操作したい。これにより、異なるデバイスや画面サイズでも一貫した体験を得られるようになる。

#### 受け入れ基準

1. WHEN 画面幅が768px以下の場合 THEN システムは左ペインをデフォルトで折りたたんだ状態で表示する SHALL
2. WHEN モバイルデバイスで表示される THEN システムは左ペインをオーバーレイ表示する SHALL
3. WHEN タブレットサイズで表示される THEN システムは左ペインの幅を画面サイズに応じて調整する SHALL
4. WHEN デスクトップサイズで表示される THEN システムは左ペインを固定幅で表示する SHALL
5. WHEN 画面サイズが変更される THEN システムはレイアウトを適切に再調整する SHALL